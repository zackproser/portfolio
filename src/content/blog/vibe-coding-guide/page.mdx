import { Button } from '@/components/Button'
import Image from 'next/image'
import Link from 'next/link'
import { Tweet } from 'react-tweet'
import RandomPortrait from '@/components/RandomPortrait'
import CV from '@/components/CV'
import ShareButton from '@/components/ShareButton'
import Newsletter from '@/components/Newsletter'

import secretsHero from '@/images/vibe-coding-survival-guide.webp'
import gettingGot  from '@/images/getting-got.webp'

import { createMetadata } from '@/utils/createMetadata'

export const metadata = createMetadata({
  author: 'Zachary Proser',
  date: '2025-04-28',
  title: 'Vibe Coding Survival Guide ‚Äì Secrets & Git Basics for Cursor-First Builders',
  description:
    'A no-jargon crash-course that keeps your AI side-projects from torching your wallet. Perfect for vibe coders with zero engineering background.',
  image: secretsHero,
})

<div className="not-prose my-8 p-6 rounded-xl border border-zinc-200 dark:border-zinc-700/40 bg-gradient-to-br from-zinc-50 via-white to-zinc-100 dark:from-zinc-900 dark:via-zinc-900/70 dark:to-zinc-800 shadow-lg">
  <h3 className="text-lg font-semibold text-zinc-900 dark:text-zinc-100 mb-4">What you get in this free mini-guide:</h3>
  <ul className="space-y-2 text-sm text-zinc-700 dark:text-zinc-300 list-none pl-0 mb-6">
    <li className="flex items-start"><span className="text-orange-500 mr-2 mt-1">‚úì</span> Plain-English intro to Git, secrets, and environment variables</li>
    <li className="flex items-start"><span className="text-orange-500 mr-2 mt-1">‚úì</span> Copy-paste snippets to lock down your first Cursor project</li>
    <li className="flex items-start"><span className="text-orange-500 mr-2 mt-1">‚úì</span> A "disaster-undo" checklist</li>
  </ul>
  <div className="mt-4 pt-4 border-t border-zinc-200 dark:border-zinc-700/40">
    <h4 className="font-semibold text-zinc-900 dark:text-zinc-100">
      Premium unlocks:
    </h4>
    <ul className="mt-2 space-y-1 text-xs text-zinc-600 dark:text-zinc-400 list-none pl-0">
      <li>‚Äì Cursor rules that **auto-block leaked keys** & prompt smart checkpoints</li>
      <li>‚Äì One-click GitGuardian + Doppler setup</li>
      <li>‚Äì Screencasts, CI templates, and real-world demos</li>
    </ul>
  </div>
</div>

<Newsletter 
  title="üöÄ Get Notified When Premium Launches!" 
  body="Join the waiting list for Vibe Coding Mastery and get an early bird discount."
  successMessage="You're on the list! We'll email you about Vibe Coding Mastery."
  position="vibe-guide-cta1"
  tags={['vibe-coder-premium-waitlist', 'source-vibe-guide-cta1']}
  className="mt-[-1rem] mb-6 not-prose"
/>

<Image
  src={secretsHero}
  alt="Cursor IDE flagging an exposed API key"
  className="rounded-lg my-6"
/>

---

## Table of contents 

## Git = Save Game, Explained üíæ

Imagine your project is a video-game world:

| Game vibe | Git concept | What it does |
|-----------|-------------|--------------|
| **Save slot** | **Commit** | Freeze the game exactly as it is so you can return any time. |
| **New level / side-quest** | **Branch** (`git checkout -b cool-experiment`) | Spin up an alternate timeline that won't break the main story. |
| **Cloud save** | **Remote (GitHub)** | Stores your code on the internet so teammates *and AI tools* can read or remix it. |

### Beginner loop (3 commands)

```bash
git init                          # start tracking files
git add . && git commit -m "save" # new save slot
git push -u origin main   
```

Need to try something wild?

```bash
git checkout -b shiny-idea        # branch off safely
# ‚Ä¶hack away‚Ä¶
git switch main && git merge shiny-idea
```

Lost in the woods?

<div className="not-prose my-4 p-4 rounded-md border border-red-300 bg-red-50 text-red-800 dark:border-red-600/30 dark:bg-red-900/20 dark:text-red-200">
  <strong className="font-semibold">‚ö†Ô∏è CAUTION:</strong> This command will undo your current uncommitted work! It is destructive. Use only if all else fails...
</div>

```bash
git reset --hard HEAD~1           # jump back one save slot
```
> **Premium perk**: installs a pre-commit hook + LLM rules that nudge Cursor to offer a branch or checkpoint when you hit risky code changes.

---

## The New Coder's Trap

Building with AI feels like you've hacked the system... until you:
- Get banned from API providers for policy violations  
- Wake up to $500 charges from leaked keys  
- Realize your "private" repo was public all along  

**This happens because:**  
Cursor is still a tool for professional developers, which assumes you know things like:
- Where secrets actually live in production  
- How Git history really works  
- That API keys = credit cards  

```javascript
// Premium content example (prevents disasters)
"rules": {
  "pre-commit": {
    "block-secrets": {
      "patterns": ["sk-[a-zA-Z0-9]{24,48}"],
      "errorMessage": "üö® Never commit API keys! Use .env + gitignore"
    }
  }
}
```

<Newsletter 
  title="üö® Prevent Costly Mistakes!" 
  body="Sign up for Vibe Coding Mastery updates & get tools to auto-block leaked keys and simplify Git."
  successMessage="You're on the list! We'll email you about Vibe Coding Mastery."
  position="vibe-guide-mid-post"
  tags={['vibe-coder-premium-waitlist', 'source-vibe-guide-mid-post']}
  className="my-8 not-prose"
/>

## Why Secrets Matter (The $500 tweet)

<div className="my-6 grid grid-cols-1 md:grid-cols-2 gap-6 not-prose">
  <div>
    <h3 className="text-lg font-semibold mb-2">How it Started</h3>
    <Tweet id="1900767509621674109" />
  </div>
  <div>
    <h3 className="text-lg font-semibold mb-2">How it's Going</h3>
    <Tweet id="1901560276488511759" />
  </div>
</div>
<figcaption>Don't end up like Leo. Learn enough to protect yourself, or buy the premium package to protect your secrets.</figcaption>

Publishing an OpenAI key to a public repo is the software equivalent of tweeting your Amex and CVV, or strolling down Times Square throwing your credit cards at strangers' faces.

Attackers can crank out four‚Äëfigure bills (or worse, wipe data) before you notice the email from Stripe.

<Image src={gettingGot} alt="Publishing your secrets on the public internet is the equivalent of walking through times square and throwing your credit cards at strangers" />

So, I've created this free guide to help welcome the new generation of builders getting their start with AI-native tooling. [I've been shipping production code at major tech companies you've heard of](/about) for the last 13+ years, 
and I don't want to see anyone else get their credentials popped or apps hacked.

<div className="mt-6 text-base text-zinc-600 dark:text-zinc-400">
  Hi, I'm Zachary. With over a decade spent building and securing software in production environments (as you can see below), I've learned a few things about keeping projects safe, especially when AI tools enter the mix.
</div>

{/* */}
<div className="my-8 grid grid-cols-1 md:grid-cols-[auto,1fr] gap-x-8 gap-y-4 items-start not-prose border-t border-b border-zinc-200 dark:border-zinc-700/40 py-8">
  <div className="md:sticky md:top-24 max-w-[150px] mx-auto md:mx-0">
    <RandomPortrait width={150} height={150} />
  </div>
  <div className="prose dark:prose-invert prose-sm">
    <CV showHeading={false} />
  </div>
</div>
{/* */}

API keys, database URLs, JWT secrets‚Äîthey're *money, access, identity*. Guard them accordingly.

---

## What actually counts as a secret?

| ‚úÖ **Keep private** | üö´ **Safe to commit** |
| --- | --- |
| `OPENAI_API_KEY` | Markdown/MDX content |
| `DATABASE_URL` (`postgres://‚Ä¶`) | Static images |
| `JWT_SECRET` | Unit‚Äëtest fixtures (dummy keys) |
| Cloud creds (`AWS_ACCESS_KEY_ID`) | README text |

> **Rule of thumb:** if someone could impersonate you, delete data, or run up a bill, it's a secret.

## 3. Secrets & Environment Variables ‚Äî Baby Steps üçº

**Secret** ‚Üí a password-like string that unlocks a paid API or private database.
**Environment variable (.env)** ‚Üí a little locked drawer your code can peek into at runtime so the secret never sits in code.

Think of .env as hiding your house key under a rock outside the door. Your code knows which rock to lift; strangers do not.

Quick mental checklist
	- Never paste a secret directly into .js / .ts files.
	-	Keep your .env file **out of Git** so it never lands on GitHub.
	-	Load the variable in code with process.env.OPENAI_API_KEY (Node) or framework helpers.

## Install GitGuardian to Auto-Detect Leaked Secrets üõ°Ô∏è

Before you start pushing code to GitHub, it's smart to set up a tool that will catch any secrets you accidentally commit. [GitGuardian](https://www.gitguardian.com/) scans your code for API keys and other sensitive info before it ever leaves your machine.

**How to install GitGuardian's CLI (`ggshield`) with Homebrew:**

1. Open the terminal in Cursor
2. Paste and run this command:

```bash
brew install gitguardian/tap/ggshield
```

Below is a quick video walkthrough of the installation process:

<video
  src="/videos/git-guardian-install.mp4"
  controls
  className="w-full max-w-2xl mx-auto my-6 rounded-lg border border-zinc-200 dark:border-zinc-700/40 shadow-lg"
  poster="/images/vibe-coding-survival-guide.webp"
  aria-label="Video walkthrough: Installing GitGuardian CLI with Homebrew"
/>

## Your First Safe Deploy ‚Äî 5-Minute Walk-through üöÄ

Follow this once, and you'll have a real-world loop you can repeat for every project.

1. Init + first save slot
```bash
git init
git add . && git commit -m "init"
```

There are two ways you can create a new file when working with Cursor: 
1. Use Cursor: Hit Cmd+Shift+P to bring up the command pallete then select Cursor ‚Üí New File ‚Üí .env
2. Run the touch command in your terminal from the root of your project: 

```bash 
touch .env
```

Next, open the .env file for editing. You should put all of your secrets, API keys, database access strings in here:
 ```bash
OPENAI_API_KEY="sk-live-‚Ä¶"
DATABASE_URL="postgres://‚Ä¶"
```


2. Create the secrets drawer

```bash
# .env
OPENAI_API_KEY="sk-live-‚Ä¶"
DATABASE_URL="postgres://‚Ä¶"
```bash 
echo ".env" >> .gitignore
```

3. Push to GitHub (cloud save)
```bash
gh repo create my-app --public   # GitHub CLI, or create via UI
git push -u origin main
```

4.	Import to Vercel
Vercel ‚Üí "Add New Project" ‚Üí pick your repo ‚Üí Environment Variables tab ‚Üí paste the same keys.

5.	Deploy & verify
Test your application in production

<div className="not-prose my-8 p-6 rounded-xl border border-zinc-200 dark:border-zinc-700/40 bg-gradient-to-br from-zinc-50 via-white to-zinc-100 dark:from-zinc-900 dark:via-zinc-900/70 dark:to-zinc-800 shadow-lg">
  <h4 className="text-md font-semibold text-zinc-900 dark:text-zinc-100 mb-4">
    Premium Version includes a deployment assistant tool that:
  </h4>
  <ul className="space-y-2 text-sm text-zinc-700 dark:text-zinc-300 list-none pl-0">
    <li className="flex items-start"><span className="text-orange-500 mr-2 mt-1">‚úì</span> Examines your project</li>
    <li className="flex items-start"><span className="text-orange-500 mr-2 mt-1">‚úì</span> Gets everything ready for production</li>
    <li className="flex items-start"><span className="text-orange-500 mr-2 mt-1">‚úì</span> Ensures no secrets will be leaked</li>
    <li className="flex items-start"><span className="text-orange-500 mr-2 mt-1">‚úì</span> Helps you deploy to production</li>
  </ul>
</div>

<Newsletter 
  title="üöÄ Get the Deployment Assistant!" 
  body="Join the waiting list for Vibe Coding Mastery and be the first to access the deployment assistant."
  successMessage="You're on the list! We'll email you about Vibe Coding Mastery."
  position="vibe-guide-cta2"
  tags={['vibe-coder-premium-waitlist', 'source-vibe-guide-cta2']}
  className="mt-[-1rem] mb-6 not-prose"
/>

<div className="mt-16 mb-16 text-center not-prose">
  <h3 className="text-lg font-semibold text-zinc-900 dark:text-zinc-100 mb-2">
    Did this guide help?
  </h3>
  <div className="text-base text-zinc-600 dark:text-zinc-400 mb-4">
    Know someone else building with AI who could benefit? Please share it!
  </div>
  <ShareButton />
</div>

## Buzzword Decoder ‚Äî One-Page Glossary üìñ

| Term                  | What it really means                                                       |
|-----------------------|----------------------------------------------------------------------------|
| **Commit**            | A "save slot" snapshot of your code.                                       |
| **Branch**            | A parallel timeline for experiments.                                       |
| **Remote**            | A copy of your repo on GitHub, GitLab, etc.                                |
| **Secret**            | Any token or password that costs money or grants access.                   |
| **Environment variable** | A key‚Äìvalue pair the OS hands to your app at runtime (`process.env.*`). |
| **`.env` file**       | Local text file that stores secrets; should stay off GitHub.               |
| **Rotate a key**      | Revoke the old secret and issue a new one.                                 |
| **Force-push**        | Overwrite history on the remote‚Äîuse only after scrubbing leaked secrets.   |
| **Preview deploy**    | Temporary URL auto-built from a feature branch.                            |
| **CI / CD**           | Robots that test ("CI") and ship ("CD") your code whenever you push.       |
