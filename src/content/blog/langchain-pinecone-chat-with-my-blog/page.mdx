import Image from 'next/image'
import Link from 'next/link'
import Callout from '@/components/Callout'

## This is the Free Overview

This page gives you the **architecture, mental model, and key moving parts** of a production RAG pipeline.  
I'm even giving you the **full source code** on GitHub, but for the **best experience and to ensure you don't miss anything**, be sure to unlock the full tutorial.

<div className="my-6 text-center">
  <Link
    href="/products/rag-pipeline-tutorial"
    className="inline-flex items-center px-6 py-3 text-lg font-bold text-white bg-orange-500 hover:bg-orange-600 rounded-lg transition-colors"
  >
    Unlock the Full Tutorial ($149)
  </Link>
</div>

I‚Äôve shipped this pattern in the real world. On my site, visitors can **chat with my writing** and get related articles as sources.  
Here‚Äôs a quick demo ‚Äî or [try it yourself](/chat):

<iframe
  className="youtube-video"
  src="https://www.youtube.com/embed/ii4aUE-6Okk"
  title="Building an AI chatbot with LangChain, Pinecone, OpenAI, and Vercel"
  frameBorder="0"
  allow="fullscreen"
></iframe>

<Image
  src="https://zackproser.b-cdn.net/images/rag-pipeline-hero.webp"
  width={800}
  height={600}
  alt="Chat with my blog feature"
/>

### What you‚Äôll learn here

You‚Äôll leave with a clear picture of **how a real RAG pipeline works** and where each tool fits.  
The **build-ready assets** (notebooks, complete Next.js app, CI/CD) live in the premium tutorial.

---

### Free vs. Premium

This page is a high-level **Free Overview**. The **Premium Tutorial** is the complete, production-ready implementation.

|                           | Free Overview | Premium Tutorial ($149) |
|---------------------------|:-------------:|:------------------------:|
| Concepts & architecture   | ‚úÖ            | ‚úÖ                       |
| Diagrams & explanations   | ‚úÖ            | ‚úÖ                       |
| Sample snippets           | ‚úÖ            | ‚úÖ                       |
| Complete Jupyter notebooks| ‚úÖ (GitHub)   | ‚úÖ (Guided)              |
| Full Next.js app          | ‚úÖ (GitHub)   | ‚úÖ (Guided)              |
| CI/CD & deployment        | ‚úÖ (GitHub)   | ‚úÖ (Guided)              |
| Step-by-step walkthroughs | ‚ùå            | ‚úÖ                       |
| Production hardening      | ‚ùå            | ‚úÖ                       |
| Troubleshooting support   | ‚ùå            | ‚úÖ                       |

<div className="my-6 text-center">
  <Link
    href="/products/rag-pipeline-tutorial"
    className="inline-flex items-center px-6 py-3 font-semibold text-white bg-orange-500 hover:bg-orange-600 rounded-lg transition-colors"
  >
    Unlock Premium Tutorial ($149) ‚Üí
  </Link>
</div>

## Architecture and data flow

At a glance, a production RAG loop looks like this:

1. **User question ‚Üí** API route receives the message.  
2. **Embedding ‚Üí** Convert question to a vector (OpenAI `text-embedding-3-large`).  
3. **Vector search ‚Üí** Query Pinecone for nearest chunks.  
4. **Prompt assembly ‚Üí** Inject retrieved text into the model prompt.  
5. **Response + sources ‚Üí** Stream the answer and surface citations.

<Image
  src="https://zackproser.b-cdn.net/images/chat-with-blog-flowchart.webp"
  width={800}
  height={600}
  alt="RAG pipeline high-level flow"
/>

### Reference implementation (unsupported)

If you're comfortable hacking, here's the **unsupported** code I use in the tutorial:

- Notebook: https://github.com/zackproser/rag-pipeline-tutorial-notebook
- Next.js app: https://github.com/zackproser/rag-pipeline-tutorial

Quickstart (DIY, no guardrails):
```bash
git clone https://github.com/zackproser/rag-pipeline-tutorial.git
cd rag-pipeline-tutorial
cp .env.example .env.local     # add OPENAI_API_KEY, PINECONE_API_KEY
# create a Pinecone index with dimension 3072 (text-embedding-3-large)
npm i && npm run dev
```

<Callout type="warning" title="Heads up">
This path is **DIY**: no CI/CD, no debugging help, no deployment hardening, and no guided walkthroughs.  
For the curated, production-ready path (full notebooks, complete app, CI/CD, deploy steps, troubleshooting):
<strong><Link href="/products/rag-pipeline-tutorial">Unlock Premium ‚Äì $149</Link></strong>.
</Callout>

<Callout type="info" title="Ready to build the real thing?">
Get the <strong>full Jupyter notebook + complete Next.js app + CI/CD</strong> in the premium tutorial.  
üëâ <Link href="/products/rag-pipeline-tutorial">Unlock Premium ‚Äì $149</Link>
</Callout>

### Minimal server shape (conceptual)

```ts
// /api/chat (conceptual; trimmed for clarity)
const lastMessage = messages.at(-1)
const queryEmbedding = await embed(lastMessage.content)        // OpenAI embeddings
const matches = await pineconeQuery(queryEmbedding, { topK: 8 }) // nearest chunks
const contextText = matches.map(m => m.metadata.text).join('\n').slice(0, 3000)

const system = `
START CONTEXT
${contextText}
END CONTEXT
Follow context; cite sources; don't hallucinate.
`

// streamText(...) ‚Äî Vercel AI SDK (premium shows complete route)
```