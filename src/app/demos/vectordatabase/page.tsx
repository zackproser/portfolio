'use client'

import React, { useState } from 'react';
import { Container } from '@/components/Container'

const generateIndexName = () => {
  // Generate a random index name
  const characters = 'abcdefghijklmnopqrstuvwxyz';
  let indexName = '';
  for (let i = 0; i < 10; i++) {
    indexName += characters.charAt(Math.floor(Math.random() * characters.length));
  }
  // Append the timestamp to the index name
  return `${indexName}-${String(new Date().getTime())}`;
}

interface Section {
  title: string;
  loading: boolean;
  content: (sections: Section[], handleAction: (data: any) => Promise<void>) => React.ReactNode;
}

const Demo = () => {
  const [expandedSection, setExpandedSection] = useState(0);
  const [indexName, setIndexName] = useState(generateIndexName());
  const [sections, setSections] = useState<Section[]>([
    {
      title: 'Create Index',
      loading: false,
      content: (sections, handleCreateIndex) => (
        <div className="p-4 text-gray-300">
          <p className="mb-4">
            In this section, you will create a new index in Pinecone. The index name will be
            pre-populated for you.
          </p>

          <button
            className="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded"
            onClick={() => handleCreateIndex(indexName)}
            disabled={sections[0].loading}
          >
            {sections[0].loading ? (
              <>
                <svg
                  className="animate-spin h-5 w-5 mr-3 inline"
                  viewBox="0 0 24 24"
                >
                  <circle
                    className="opacity-25"
                    cx="12"
                    cy="12"
                    r="10"
                    stroke="currentColor"
                    strokeWidth="4"
                  />
                  <path
                    className="opacity-75"
                    fill="currentColor"
                    d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                  />
                </svg><span>Creating index...</span>
              </>
            ) : (
              'Create Index'
            )}
          </button>

          <input
            type="text"
            className="border border-gray-300 rounded p-2 mt-4 ml-8"
            placeholder={indexName}
            disabled={true}
          />
          <p className="mb-4 mt-6">
            Vector indexing is a core concept in vector databases. Indexes are a data structure that enable fast retrieval of vectors over large datasets. By creating an index, you can quickly search for similar vectors in the database.
          </p>
          <p className="mb-4 mt-6">You can also use indexes as an organizational tool, by creating a new index for each of your use cases or apps.</p>
        </div>
      ),
    },
    {
      title: 'Add Vectors',
      loading: false,
      content: (sections, handleAddVectors) => {
        const phrases = [
          {
            text: 'The quick brown fox jumps over the lazy dog',
            vectors: [{
              "embeddings": [
                -0.003564687,
                0.008303993,
                -0.014158245,
                -0.004516317,
                -0.015439648,
                0.01861803,
                -0.02051501,
                -0.010194691,
                -0.012927094,
                -0.028090362,
                0.019547675,
                0.01712306,
                0.021771286,
                0.0014800518,
                0.0021592267,
                -0.009265046,
                0.031808943,
                -0.0056249816,
                0.009698461,
                -0.008812785,
                -0.013555232,
                0.022035105,
                -0.0033197128,
                -0.004761291,
                0.006771335,
                0.017022558,
                0.006064679,
                -0.00385049,
                -0.0035835311,
                -0.0041739815,
                0.015653215,
                -0.0017650697,
                -0.031607937,
                -0.0027481066,
                -0.011293934,
                -0.017600445,
                -0.005640685,
                -0.008134396,
                0.024761226,
                -0.04796467,
                0.015251207,
                0.026532577,
                -0.023869269,
                -0.007242439,
                -0.0027748025,
                0.016658237,
                0.011300215,
                -0.012267549,
                -0.028442118,
                0.0077952007,
                -0.000052606614,
                0.009842933,
                -0.010150721,
                -0.00915198,
                -0.007537664,
                -0.0062813866,
                -0.0049434514,
                -0.003021347,
                0.013668298,
                -0.00502825,
                0.008410777,
                0.008812785,
                -0.00525438,
                -0.002105835,
                0.0004860223,
                -0.012512523,
                0.006809023,
                -0.00774495,
                -0.00783917,
                -0.0033448385,
                0.021595407,
                -0.00087311276,
                0.0018514388,
                0.0052135508,
                0.034899384,
                -0.007185906,
                -0.036281288,
                0.011564033,
                0.021758724,
                0.009352985,
                0.032487333,
                -0.04040188,
                -0.0056375447,
                0.020716013,
                0.02174616,
                0.0072926898,
                -0.025313988,
                0.03188432,
                -0.019233607,
                0.010062781,
                0.0042587803,
                0.029648146,
                0.007858015,
                -0.0064289994,
                -0.015590401,
                -0.0009987404,
                -0.0033605418,
                0.016922057,
                -0.010816548,
                -0.031783815,
                0.009528863,
                -0.006564049,
                -0.026934586,
                -0.0029098524,
                0.012499959,
                -0.021733599,
                -0.012807747,
                0.02092958,
                0.014685882,
                -0.009528863,
                0.012977345,
                0.017374316,
                0.016118038,
                -0.037663195,
                0.0028548902,
                -0.0028014984,
                0.019509988,
                -0.0104585085,
                -0.010439665,
                -0.011645691,
                0.018065268,
                0.025364239,
                0.01988687,
                -0.0070728413,
                -0.01639442,
                -0.009026352,
                0.0015868354,
                -0.00069723395,
                -0.00991831,
                0.00067838974,
                0.03361798,
                0.024208464,
                0.026934586,
                -0.01114318,
                -0.037839074,
                0.023291381,
                0.005050235,
                0.0014643483,
                -0.027110465,
                -0.015301458,
                0.0012923953,
                0.015891908,
                -0.0088944435,
                0.0070916857,
                0.01449744,
                0.0240954,
                0.010408258,
                -0.00069723395,
                0.0013175209,
                -0.013278851,
                0.02178385,
                0.00366833,
                0.036231037,
                0.0062751053,
                0.012386895,
                0.013718548,
                0.004475488,
                0.020527571,
                -0.028567746,
                -0.01983662,
                0.025753686,
                0.018768784,
                -0.0019503706,
                -0.011149461,
                0.00075769227,
                0.025540119,
                0.03012553,
                0.00060262054,
                0.012129358,
                -0.008806504,
                0.0014368672,
                0.030552665,
                -0.015075328,
                0.03809033,
                0.0002740255,
                0.0102386605,
                0.021532593,
                -0.015150704,
                -0.033944614,
                0.00046364486,
                0.0055024945,
                0.013957242,
                0.036859177,
                0.021080334,
                0.00493717,
                0.025037607,
                0.0053643044,
                -0.029170759,
                -0.0031328415,
                0.00015301065,
                0.0059861615,
                0.0024104821,
                -0.016620548,
                -0.015904471,
                -0.6846209,
                -0.02482404,
                0.003800239,
                -0.008159521,
                0.024698412,
                0.03143206,
                -0.0057223435,
                -0.010672076,
                0.003256899,
                0.032009948,
                -0.0223743,
                0.0013347947,
                0.0029224153,
                -0.005929629,
                -0.008630625,
                -0.008184647,
                0.032286327,
                -0.025854187,
                -0.010339162,
                0.018718533,
                0.0065703304,
                0.010935894,
                -0.009987405,
                0.00015615135,
                -0.0024591628,
                0.0143341245,
                -0.0016041091,
                0.0009995257,
                0.0043875487,
                0.017361753,
                -0.003768832,
                0.016143164,
                -0.008102989,
                0.008285149,
                0.04497473,
                0.008115551,
                -0.0058730966,
                0.02025119,
                0.03597978,
                0.052964654,
                -0.033869237,
                -0.006011287,
                0.013329103,
                0.0027575288,
                -0.018278835,
                -0.0041111675,
                0.027788855,
                0.014208497,
                -0.004010665,
                -0.01639442,
                0.0022126185,
                0.016683362,
                0.015565276,
                0.0053894296,
                -0.01503764,
                0.026507452,
                0.016193414,
                0.0058888,
                0.0035552648,
                -0.008586655,
                -0.01263815,
                0.0059767393,
                -0.013705986,
                0.011205994,
                -0.024660723,
                0.0065514864,
                -0.008819067,
                0.015590401,
                0.019723555,
                -0.017148186,
                0.018291399,
                0.018580342,
                -0.011249963,
                0.009497456,
                0.010998708,
                0.009968561,
                0.008448465,
                -0.00575375,
                -0.013140661,
                0.007983643,
                -0.015816532,
                -0.0031579672,
                -0.033869237,
                0.0045508645,
                0.03103005,
                0.014962263,
                -0.03256271,
                -0.012386895,
                -0.0024403187,
                -0.019547675,
                0.016658237,
                0.02600494,
                -0.03148231,
                0.0022393144,
                -0.012462271,
                0.0054114144,
                -0.006922088,
                0.04125615,
                0.042236045,
                -0.027261218,
                0.010025093,
                0.0006964487,
                -0.011702224,
                -0.0053423196,
                0.009824089,
                0.026130568,
                0.01295222,
                0.0048084017,
                0.02025119,
                -0.0063693263,
                -0.008071582,
                -0.019987373,
                0.02020094,
                0.0065200794,
                -0.005257521,
                -0.024447156,
                0.014685882,
                -0.0044377996,
                0.013278851,
                -0.019736117,
                0.011953479,
                -0.00724872,
                0.005847971,
                0.0010741171,
                0.012123076,
                -0.0009327859,
                -0.03741194,
                -0.024937104,
                -0.012330362,
                -0.0057192026,
                -0.005559027,
                0.022123044,
                0.031909443,
                -0.0027025666,
                -0.0005217477,
                -0.0072047506,
                0.011224838,
                0.0067838975,
                0.018605467,
                -0.0076256036,
                -0.024861729,
                0.006922088,
                -0.012173328,
                -0.01762557,
                0.0062813866,
                -0.018919537,
                -0.026055193,
                -0.0044158148,
                0.0031830927,
                0.02595469,
                -0.015301458,
                -0.024208464,
                -0.0117085045,
                -0.017110497,
                0.023831582,
                -0.008366807,
                -0.03683405,
                -0.0030496132,
                -0.008272586,
                -0.03203507,
                0.04213554,
                0.009214794,
                -0.00078281783,
                -0.0011220127,
                0.00566267,
                -0.027009962,
                0.0067964606,
                0.026808959,
                -0.027462222,
                -0.019874308,
                -0.0103328815,
                -0.020992395,
                -0.0080653,
                0.0029522518,
                -0.017286377,
                0.0056501073,
                -0.022173295,
                -0.022801433,
                -0.0020320285,
                -0.011124336,
                -0.005499354,
                0.0143969385,
                0.008121833,
                -0.020464757,
                0.013944678,
                -0.002713559,
                0.023341633,
                0.01481151,
                -0.02211048,
                -0.006739928,
                0.025100421,
                0.0298994,
                0.00933414,
                -0.013655734,
                -0.0028658826,
                -0.021670785,
                0.003048043,
                0.026808959,
                0.016733615,
                0.016381856,
                0.020351693,
                -0.008360526,
                -0.0009594818,
                -0.029522518,
                0.0264572,
                -0.02786423,
                0.009522582,
                -0.003913304,
                0.008756253,
                0.0061997287,
                -0.016193414,
                -0.0008267875,
                0.019183354,
                -0.030427037,
                0.01567834,
                0.023128066,
                -0.013957242,
                0.022261234,
                0.006978621,
                -0.01309041,
                0.004104886,
                -0.012129358,
                0.012405739,
                -0.012141921,
                0.023806456,
                0.024195902,
                0.010973583,
                0.018241147,
                -0.003129701,
                -0.0050942046,
                -0.026281321,
                0.0030653167,
                0.014786384,
                0.015791407,
                0.010383132,
                -0.0037437065,
                0.0057223435,
                -0.009641929,
                0.010515042,
                0.0038222237,
                0.018492403,
                -0.0072989715,
                0.004516317,
                -0.013153223,
                0.011394436,
                0.012939656,
                0.023856707,
                0.0009170825,
                -0.018768784,
                0.0074120364,
                -0.0017603586,
                -0.006469828,
                -0.02668333,
                0.026808959,
                0.0037405659,
                -0.011363029,
                0.019761242,
                0.0020869907,
                0.024296403,
                0.02523861,
                0.0067650536,
                -0.0047958386,
                0.0074497247,
                0.015200956,
                0.022072792,
                -0.004016947,
                -0.006196588,
                0.002781084,
                0.014409501,
                -0.02939689,
                -0.023618015,
                -0.003420215,
                -0.0020414507,
                -0.011381873,
                0.020288879,
                0.017097935,
                -0.03751244,
                0.01567834,
                0.020012498,
                0.02211048,
                -0.0240954,
                -0.02332907,
                0.0012986767,
                0.008856756,
                -0.0019974809,
                0.008253742,
                -0.021168273,
                -0.0020116142,
                -0.0025800795,
                0.021645658,
                0.0013473574,
                -0.0033762453,
                -0.0048869187,
                -0.0016205978,
                -0.008316556,
                -0.017512506,
                0.017763762,
                -0.005288928,
                -0.006922088,
                -0.024396906,
                0.016796429,
                -0.00037315363,
                -0.0019064009,
                -0.0075565083,
                0.022223545,
                0.0029569627,
                -0.013731111,
                -0.0026664487,
                0.0016991151,
                0.01866828,
                -0.015502462,
                -0.012154483,
                -0.012110514,
                0.007405755,
                0.00058495416,
                -0.006174603,
                -0.023366759,
                -0.011683379,
                0.028391868,
                0.007914547,
                -0.010766297,
                -0.014308999,
                -0.0057600318,
                0.019396922,
                0.085577615,
                0.024233589,
                -0.016067788,
                0.0149497,
                0.015778843,
                -0.021959728,
                -0.021319026,
                -0.010628106,
                0.022612993,
                -0.016557734,
                -0.0056783734,
                -0.011714786,
                0.0026114865,
                -0.0069095255,
                0.025829062,
                -0.009711023,
                0.009893184,
                -0.016984869,
                0.0020555838,
                0.0034579034,
                -0.0012028855,
                0.0020602948,
                0.00036000198,
                0.0041834037,
                -0.016193414,
                0.0030637463,
                -0.0057129213,
                0.017211,
                0.027638102,
                -0.0345225,
                -0.0028187723,
                0.007631885,
                0.015163267,
                0.007129374,
                0.02025119,
                0.014095432,
                -0.0007156855,
                0.020678325,
                0.032487333,
                -0.029070258,
                0.016972307,
                0.0072298762,
                0.00042595653,
                0.0052920682,
                0.027060214,
                0.0018765642,
                -0.02092958,
                0.011350466,
                0.008329119,
                -0.030628042,
                0.03125618,
                -0.006463547,
                -0.010998708,
                0.007650729,
                0.0050722198,
                0.028291365,
                -0.015326584,
                0.0031501155,
                -0.011570314,
                -0.01282031,
                -0.007945954,
                -0.016607987,
                -0.008310274,
                -0.008737409,
                0.003925867,
                -0.02324113,
                -0.01571603,
                -0.01163941,
                -0.011570314,
                -0.016494922,
                -0.016143164,
                -0.026834084,
                -0.014623068,
                -0.0063944515,
                0.012060262,
                0.028768752,
                0.0078077638,
                -0.01259418,
                0.0027276922,
                0.008856756,
                -0.01571603,
                -0.0078014825,
                0.0014219489,
                -0.029547643,
                0.0025031327,
                0.004761291,
                0.016293917,
                -0.007217313,
                0.003605516,
                0.017110497,
                0.010822829,
                0.004842949,
                -0.0015923316,
                0.0073555037,
                0.020791389,
                -0.009886903,
                0.01594216,
                0.039220978,
                0.012254985,
                -0.0032474769,
                0.031507436,
                -0.022864247,
                -0.0025832204,
                -0.0008793941,
                0.009528863,
                -0.0035269987,
                0.030854171,
                0.00008283579,
                -0.026105443,
                -0.024334092,
                0.025690872,
                -0.004519458,
                0.0143969385,
                0.008448465,
                0.006463547,
                0.01594216,
                0.02219842,
                0.011840414,
                -0.002331965,
                -0.01091705,
                -0.005961036,
                -0.020477321,
                -0.0020634355,
                0.02559037,
                -0.026582828,
                0.015200956,
                -0.007192188,
                -0.013756237,
                -0.0029632442,
                0.0061683217,
                0.008737409,
                0.001349713,
                -0.0018153208,
                -0.010452228,
                -0.043693326,
                -0.0115075,
                -0.004155137,
                0.01481151,
                -0.020741139,
                -0.0018969788,
                -0.02668333,
                -0.00058691704,
                0.012060262,
                -0.04128127,
                0.017562756,
                -0.027336596,
                0.000017200204,
                -0.011042678,
                -0.0053611635,
                0.008938413,
                -0.006708521,
                -0.003062176,
                -0.024032585,
                -0.010885643,
                0.00016410122,
                -0.03746219,
                0.006595456,
                -0.014886887,
                0.034396872,
                0.019195918,
                0.03221095,
                -0.0064886725,
                0.0019236747,
                0.023379322,
                -0.031055177,
                -0.00724872,
                0.0032757432,
                -0.014748696,
                -0.015200956,
                -0.009415799,
                0.031507436,
                0.007939673,
                0.02703509,
                0.023806456,
                -0.0183919,
                0.008128114,
                -0.0006917377,
                0.0033825268,
                -0.011394436,
                -0.018140644,
                0.019786367,
                -0.006852993,
                0.013354228,
                -0.0060992264,
                -0.013994929,
                -0.005942192,
                0.010728609,
                0.025263738,
                0.03278884,
                0.015339146,
                0.02101752,
                0.002545532,
                -0.0039886804,
                0.0068467115,
                -0.0040200874,
                -0.028894378,
                0.003925867,
                0.01128137,
                0.0068969624,
                0.03057779,
                0.0025785093,
                0.016469795,
                -0.010860518,
                0.0287185,
                -0.0014415783,
                0.007864296,
                -0.0047958386,
                -0.013655734,
                0.0018561498,
                -0.023140628,
                -0.009711023,
                -0.04035163,
                -0.014987389,
                -0.021205962,
                0.0019425189,
                0.025175799,
                -0.009309015,
                0.014635631,
                -0.009070322,
                -0.039924495,
                -0.0065891747,
                0.00040711238,
                0.040703386,
                -0.01182157,
                0.013969804,
                0.019849181,
                -0.003429637,
                0.0055653085,
                0.018203458,
                0.006859274,
                -0.0009327859,
                -0.0016221681,
                0.012154483,
                -0.002776373,
                -0.008234898,
                -0.024924543,
                -0.011852977,
                -0.026984837,
                -0.010194691,
                0.029572768,
                -0.0032097886,
                -0.0010144439,
                -0.011136899,
                -0.013504981,
                0.002975807,
                0.011840414,
                -0.015728593,
                -0.0022000556,
                -0.031080302,
                0.00015516988,
                -0.036482293,
                0.011934634,
                -0.019371796,
                -0.0019629335,
                -0.027939608,
                -0.007185906,
                0.007280127,
                0.014007492,
                -0.023655701,
                -0.008756253,
                -0.015917033,
                0.0149497,
                -0.020389382,
                -0.00019550817,
                0.014070306,
                0.0022126185,
                -0.019107979,
                -0.018102957,
                -0.004403252,
                0.026381824,
                -0.009855496,
                -0.017236125,
                -0.010069063,
                0.014422064,
                0.017713511,
                -0.01861803,
                0.0037562693,
                -0.021947166,
                -0.0034233558,
                0.012305236,
                0.016947182,
                -0.0057788757,
                -0.004792698,
                0.005430259,
                -0.010075345,
                0.00056650257,
                -0.005376867,
                -0.014233623,
                0.0074183177,
                -0.02899488,
                -0.0027402549,
                -0.013216037,
                -0.0073178154,
                0.00080283976,
                0.01952255,
                -0.0020602948,
                -0.0028705937,
                0.016281355,
                -0.029924527,
                0.01861803,
                -0.022499926,
                0.011388154,
                -0.022700932,
                0.009729868,
                0.011727349,
                0.006290809,
                0.016457234,
                -0.01726125,
                0.0009579115,
                -0.025665745,
                -0.005653248,
                -0.004824105,
                0.019308982,
                -0.024082836,
                0.0055778716,
                -0.00016390493,
                0.0065514864,
                -0.023404447,
                -0.001589976,
                0.031834066,
                -0.00007895899,
                0.019623052,
                0.03499989,
                -0.024107963,
                0.0065514864,
                0.0025156953,
                0.0031548264,
                0.013781362,
                -0.016683362,
                -0.009183387,
                -0.011538907,
                0.029547643,
                0.0037028776,
                -0.015464774,
                -0.013417042,
                -0.003048043,
                -0.017298939,
                0.01182157,
                -0.02600494,
                -0.0039164447,
                0.016620548,
                0.0055464646,
                -0.024208464,
                0.01635673,
                -0.012261267,
                -0.014899449,
                -0.01259418,
                -0.010295193,
                -0.0321607,
                -0.020891892,
                -0.0026570265,
                0.0051036268,
                0.01875622,
                -0.012273829,
                -0.02332907,
                -0.0060583972,
                -0.00770098,
                -0.009817807,
                0.021633096,
                0.003737425,
                0.010816548,
                -0.020414507,
                0.014510003,
                0.017236125,
                -0.010772578,
                0.024748664,
                -0.01884416,
                -0.010672076,
                -0.015326584,
                -0.0039666956,
                -0.0039070225,
                -0.0013638461,
                -0.00047895574,
                -0.012280111,
                0.006708521,
                0.025062732,
                0.0047047585,
                0.013957242,
                -0.009660773,
                0.0037185808,
                0.00078556594,
                -0.023128066,
                0.0051538777,
                -0.0060144276,
                0.010502478,
                -0.027612977,
                -0.016281355,
                0.013831614,
                -0.015665779,
                -0.023153191,
                0.0017634993,
                0.01929642,
                -0.0041237306,
                0.005593575,
                -0.022813996,
                0.000063255524,
                -0.017713511,
                -0.028542621,
                0.0063379193,
                -0.009660773,
                0.030753668,
                0.020138126,
                -0.010540167,
                -0.011243682,
                0.0010395695,
                0.010684639,
                -0.013932115,
                -0.019145668,
                0.007845452,
                -0.018542653,
                0.00647611,
                -0.02600494,
                -0.001929956,
                -0.018241147,
                0.0025361099,
                -0.020728577,
                -0.014158245,
                -0.022135606,
                0.022298923,
                -0.009384392,
                -0.020753702,
                -0.0018781347,
                -0.019195918,
                0.0015860501,
                0.002283284,
                -0.009623084,
                0.009139418,
                0.0026538859,
                -0.015050203,
                -0.012129358,
                -0.00019040453,
                -0.01865572,
                -0.009912028,
                0.013643172,
                -0.0059547545,
                0.026708456,
                0.23256207,
                -0.006972339,
                0.0045414427,
                0.03419587,
                -0.005672092,
                0.028040111,
                0.019359233,
                -0.005191566,
                -0.008724846,
                0.021871788,
                -0.0015884057,
                0.00475501,
                -0.020138126,
                0.00856153,
                0.01413312,
                0.010728609,
                -0.006322216,
                -0.0028596013,
                -0.009189669,
                -0.029974777,
                -0.012236142,
                -0.008492434,
                -0.0160301,
                -0.00552448,
                0.0076193223,
                0.01707281,
                -0.009114292,
                0.0042273733,
                0.031406935,
                0.015929596,
                -0.013957242,
                -0.003074739,
                -0.008881881,
                0.019371796,
                -0.0145853795,
                0.0071042483,
                0.015188393,
                0.021658221,
                0.006922088,
                -0.00024320744,
                0.021155711,
                -0.0017006855,
                -0.010200972,
                -0.018379338,
                0.0115828775,
                0.024811478,
                0.012839154,
                0.0052795056,
                -0.01241202,
                0.031231055,
                -0.031004924,
                0.0020602948,
                0.008102989,
                0.027663227,
                -0.004833527,
                0.010163284,
                0.023806456,
                0.0029114226,
                0.011224838,
                0.0054019927,
                0.009798964,
                0.030326534,
                -0.02523861,
                0.006174603,
                -0.0040829014,
                0.015238645,
                -0.013982367,
                0.004353001,
                -0.0011659825,
                0.010716045,
                -0.012977345,
                -0.0021168273,
                0.00028384017,
                0.002894149,
                -0.0029820884,
                -0.026281321,
                0.013253726,
                0.015753718,
                0.006482391,
                0.021821538,
                -0.026582828,
                0.019723555,
                -0.011783881,
                -0.014786384,
                -0.010213534,
                -0.021570282,
                0.009566552,
                -0.0026962853,
                -0.022675807,
                0.0021356714,
                -0.00040200874,
                -0.03419587,
                -0.0023084097,
                -0.008329119,
                0.004780135,
                0.0034264964,
                0.00665827,
                0.027562724,
                0.0049151853,
                -0.005602997,
                -0.033241097,
                -0.036205914,
                0.004136293,
                0.002848609,
                0.0083354,
                -0.012587899,
                0.006984902,
                -0.006042694,
                0.0028972896,
                -0.010697202,
                -0.013341665,
                0.005684655,
                0.0025753686,
                0.0076570106,
                0.008982383,
                -0.009830371,
                0.0020540135,
                -0.018630592,
                -0.012311518,
                -0.0028329054,
                0.005263802,
                -0.024786351,
                -0.02595469,
                0.012543929,
                0.00069998205,
                -0.029321512,
                0.005295209,
                0.011953479,
                -0.011752474,
                -0.039246105,
                0.014183371,
                -0.022273798,
                0.015427086,
                0.0007419888,
                -0.008982383,
                0.0018561498,
                -0.009101729,
                -0.014070306,
                0.003728003,
                0.013718548,
                0.009064041,
                0.005398852,
                -0.0097864,
                0.016570298,
                0.010998708,
                -0.033266224,
                0.0115075,
                -0.0038285053,
                -0.023027563,
                -0.018128082,
                -0.018680844,
                0.003596094,
                -0.0068655554,
                -0.008165803,
                0.030929549,
                -0.029698396,
                -0.01743713,
                -0.028693374,
                0.00747485,
                0.012430864,
                -0.032914467,
                -0.00946605,
                0.0019770665,
                -0.007393192,
                -0.01368086,
                -0.018040143,
                -0.15949698,
                -0.0014886886,
                0.018592905,
                0.007832889,
                -0.011432123,
                -0.01064695,
                0.0435677,
                -0.017298939,
                -0.027738603,
                -0.00430275,
                0.011576596,
                0.00046600038,
                -0.043919455,
                0.005640685,
                -0.02246224,
                -0.00022318552,
                -0.02640695,
                0.008668314,
                0.014962263,
                -0.0004271343,
                0.00629709,
                -0.008950976,
                0.019145668,
                -0.0038253644,
                -0.002043021,
                0.022009978,
                -0.00951002,
                0.01413312,
                -0.0067650536,
                -0.022298923,
                -0.028190864,
                -0.016746176,
                -0.0042053885,
                -0.012324081,
                -0.0010222957,
                0.0051256116,
                -0.008134396,
                0.0027700916,
                -0.020075312,
                0.031180803,
                0.02228636,
                0.048316427,
                0.026884334,
                0.013630609,
                -0.001390542,
                0.0091771055,
                -0.00082914304,
                0.01599241,
                0.006746209,
                -0.009145699,
                -0.01793964,
                -0.00534546,
                0.02101752,
                -0.008316556,
                0.0071356553,
                0.0061274925,
                -0.006061538,
                0.016457234,
                -0.01354267,
                0.006890681,
                -0.0166708,
                -0.022487365,
                0.009754994,
                0.00018431945,
                -0.03429637,
                -0.015741155,
                -0.020841641,
                0.024045149,
                -0.034572754,
                -0.010094188,
                -0.000051036266,
                -0.006645707,
                0.010364288,
                0.012060262,
                -0.013819051,
                0.012217297,
                -0.019459736,
                0.0044629253,
                -0.00023123354,
                0.008354245,
                -0.0048084017,
                0.010263786,
                -0.0058322675,
                -0.007901984,
                0.012022574,
                -0.0055558863,
                0.002314691,
                0.000029910198,
                0.004610538,
                0.000423601,
                -0.008706002,
                -0.048215926,
                -0.00038120165,
                -0.020640636,
                0.009886903,
                0.02209792,
                0.01653261,
                0.0043592826,
                0.00951002,
                0.00937811,
                -0.025829062,
                -0.007851734,
                -0.029070258,
                0.0044377996,
                0.010445946,
                0.012851717,
                0.025829062,
                0.016695926,
                0.025514992,
                -0.0023523793,
                -0.0063127936,
                0.022889374,
                0.007638166,
                0.025615495,
                -0.0044472218,
                -0.004428378,
                0.001091391,
                -0.0044911914,
                -0.0024999918,
                -0.005819705,
                0.07532639,
                0.0029601036,
                -0.022361737,
                -0.0031689596,
                -0.01114318,
                0.02491198,
                -0.1055273,
                -0.031231055,
                0.0071670623,
                0.009905747,
                -0.006278246,
                0.018228585,
                -0.00974243,
                0.0051758625,
                0.009868058,
                0.025427053,
                0.0092085125,
                -0.007374348,
                -0.002912993,
                -0.026808959,
                0.03346723,
                0.0039886804,
                0.029648146,
                -0.0066017373,
                -0.02600494,
                0.0145853795,
                -0.006444703,
                0.011570314,
                0.0018216021,
                -0.019824056,
                -0.027185842,
                -0.0060772416,
                -0.0345225,
                0.010483635,
                0.0033259944,
                -0.0068655554,
                0.011752474,
                -0.015891908,
                0.0035866718,
                -0.0032223514,
                0.012223578,
                0.019736117,
                -0.0022440255,
                -0.006507517,
                0.014987389,
                -0.013128098,
                0.0015428656,
                -0.0014690593,
                0.0118655395,
                -0.024032585,
                0.023756204,
                -0.0037656913,
                0.01865572,
                0.013731111,
                0.00086055,
                -0.0027025666,
                -0.026080318,
                -0.0013096691,
                -0.02242455,
                -0.015012514,
                0.039246105,
                0.0075565083,
                0.013831614,
                0.01788939,
                0.007870577,
                0.021645658,
                0.017650697,
                -0.015100454,
                -0.009711023,
                0.03419587,
                0.040150624,
                -0.0045854123,
                -0.021997416,
                0.003768832,
                0.0068781185,
                -0.0066833952,
                -0.02849237,
                0.03733656,
                -0.009478613,
                0.023391884,
                -0.015276332,
                0.004180263,
                -0.009057759,
                -0.03434662,
                0.018643156,
                -0.008354245,
                -0.02211048,
                -0.022022542,
                -0.006507517,
                -0.025929565,
                0.02849237,
                0.012707246,
                -0.013756237,
                0.020590385,
                -0.007003746,
                0.0031328415,
                0.010150721,
                0.01200373,
                0.015653215,
                -0.044095334,
                -0.028844127,
                0.015452212,
                0.0035803905,
                -0.0046450854,
                0.0017242406,
                0.022499926,
                -0.020791389,
                -0.017663259,
                -0.04175866,
                0.013630609,
                -0.021268776,
                -0.014045181,
                0.0144597525,
                0.018404463,
                -0.0115514705,
                -0.017562756,
                -0.009987405,
                -0.006149478,
                -0.012694683,
                0.0117399115,
                -0.018366775,
                0.009032634,
                0.0114886565,
                -0.018015018,
                -0.0018577201,
                -0.014623068,
                -0.00028717716,
                0.0017195296,
                0.012443427,
                -0.0034830288,
                0.021557719,
                -0.0032883058,
                -0.002237744,
                0.002115257,
                -0.004871215,
                0.017374316,
                -0.03148231,
                -0.008850474,
                -0.009321578,
                -0.041834034,
                0.004070339,
                0.024949668,
                -0.0011353607,
                -0.01562809,
                -0.003071598,
                -0.0060269907,
                0.0075251013,
                0.020452196,
                -0.010590418,
                -0.025213486,
                0.0054459623,
                -0.041532528,
                -0.033366725,
                0.0018655718,
                -0.00020826723,
                0.002333535,
                0.024798915,
                0.005172722,
                0.022072792,
                0.019032601,
                -0.015414523,
                -0.013643172,
                -0.00077849935,
                -0.03565315,
                0.0067022396,
                -0.013504981,
                0.0014486448,
                -0.03492451,
                0.012927094,
                -0.000783603,
                0.013102973,
                0.024987357,
                0.01295222,
                0.0018420167,
                0.0011856117,
                -0.02395721,
                0.0072361575,
                -0.023366759,
                -0.008159521,
                0.020791389,
                0.0045508645,
                0.0061086486,
                0.00942208,
                -0.001001096,
                -0.0045320205,
                0.0076444475,
                -0.022575304,
                0.004701618,
                0.020025061,
                -0.007826608,
                -0.005489932,
                0.01734919,
                0.014409501,
                0.0071733436,
                -0.019233607,
                -0.018354211,
                -0.0022393144,
                0.021959728,
                -0.0077575124,
                -0.0033574011,
                -0.0070225904,
                -0.001001096,
                -0.013379354,
                0.0027057072,
                -0.029045133,
                0.004670211,
                -0.0049999836,
                0.015690904,
                0.004597975,
                -0.00061086484,
                -0.015326584,
                -0.026783833,
                -0.0051570185,
                0.009868058,
                -0.007575352,
                -0.021356715,
                0.000978326,
                0.0056815143,
                0.0020053326,
                -0.01915823,
                -0.0054239775,
                0.008994945,
                -0.008429621,
                0.031607937,
                0.00021101533,
                -0.022839122,
                -0.028819002,
                0.03537677,
                0.011124336,
                -0.00090216415,
                0.021030083,
                -0.013291414,
                0.014208497,
                0.0066080187,
                0.021545157,
                -0.034748632,
                -0.032361705,
                0.009792682,
                -0.01245599,
                -0.00044872655,
                0.0007443443,
                0.0066143,
                -0.008907006,
                -0.023932083,
                0.009371829,
                0.033391852,
                -0.009283889,
                0.056683235,
                0.031783815,
                -0.020414507,
                -0.0037782541,
                0.0056815143,
                0.007273846,
                0.013731111,
                0.018592905,
                -0.038065203,
                -0.010986146,
                0.0022722916,
                -0.008297712,
                0.012939656,
                -0.022298923,
                -0.014786384,
                -0.030778795,
                -0.02967327,
                -0.012211015,
                -0.0038159424,
                -0.016118038,
                0.022625554,
                0.001725811,
                0.014962263,
                0.0014321562,
                -0.021180836,
                -0.022587867,
                0.03130643,
                0.0022393144,
                -0.000016280079,
                -0.01952255,
                -0.003863053,
                0.0039572734,
                -0.022587867,
                -0.007606759,
                0.028391868,
                -0.0006622937,
                0.020942144,
                0.013190912,
                0.028969755,
                -0.0021670784,
                -0.011532626,
                0.009252483,
                -0.012355488,
                -0.004968577,
                0.0132286,
                0.040954642,
                -0.031457186,
                0.018467277,
                -0.0413064
              ]
            }],
          },
          {
            text: 'To be or not to be, that is the question',
            vectors: [/* Embedding vectors for the second phrase */],
          },
          {
            text: 'A picture is worth a thousand words',
            vectors: [/* Embedding vectors for the third phrase */],
          },
        ];
        return (
          <div className="p-4 text-gray-300">
            <p className="mb-4">
              In this section, you can add vectors to your index by clicking on the buttons below.
              Each button corresponds to a well-known phrase, and the associated vectors will be
              upserted to your index.
            </p>
            <div className="space-y-4">
              {phrases.map((phrase, index) => (
                <button
                  key={index}
                  className="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded block w-full"
                  onClick={() => handleAddVectors(phrase.vectors)}
                  disabled={sections[1].loading}
                >
                  {sections[1].loading ? (
                    <svg
                      className="animate-spin h-5 w-5 mr-3 inline"
                      viewBox="0 0 24 24"
                    >
                      {/* Loading spinner SVG */}
                    </svg>
                  ) : (
                    phrase.text
                  )}
                </button>
              ))}
            </div>
          </div>
        );
      },
    },
    {
      title: 'Metadata',
      loading: false,
      content: (sections, handleCreateIndex) => (
        <div className="p-4 text-gray-300">
          <p className="mb-4">
            In this section, you will add metadata to the vectors. Metadata allows you to associate
            additional information with the vectors for querying purposes.
          </p>
          {/* Add form or input fields for adding metadata */}
          <button
            className="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded"
            onClick={() => handleSectionCompletion(3)}
            disabled={sections[2].loading}
          >
            {sections[2].loading ? (
              <svg
                className="animate-spin h-5 w-5 mr-3 inline"
                viewBox="0 0 24 24"
              >
                <circle
                  className="opacity-25"
                  cx="12"
                  cy="12"
                  r="10"
                  stroke="currentColor"
                  strokeWidth="4"
                />
                <path
                  className="opacity-75"
                  fill="currentColor"
                  d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                />
              </svg>
            ) : (
              'Add Metadata'
            )}
          </button>
        </div>
      ),
    },
    {
      title: 'Query',
      loading: false,
      content: (sections, handleCreateIndex) => (
        <div className="p-4 text-gray-300">
          <p className="mb-4">
            In this section, you can perform a similarity search on the index. Enter a query phrase
            and find the most similar vectors based on semantic meaning.
          </p>
          {/* Add form or input fields for querying the index */}
          <button
            className="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded"
            onClick={() => handleSectionCompletion(4)}
            disabled={sections[3].loading}
          >
            {sections[3].loading ? (
              <svg
                className="animate-spin h-5 w-5 mr-3 inline"
                viewBox="0 0 24 24"
              >
                <circle
                  className="opacity-25"
                  cx="12"
                  cy="12"
                  r="10"
                  stroke="currentColor"
                  strokeWidth="4"
                />
                <path
                  className="opacity-75"
                  fill="currentColor"
                  d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                />
              </svg>
            ) : (
              'Search'
            )}
          </button>
        </div>
      ),
    },
    {
      title: 'Clean Up',
      loading: false,
      content: (sections, handleCreateIndex) => (
        <div className="p-4 text-gray-300">
          <p className="mb-4">
            In this section, you can clean up the demo by deleting the index you created.
          </p>
          <button
            className="bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded"
            onClick={() => handleSectionCompletion(0)}
            disabled={sections[4].loading}
          >
            {sections[4].loading ? (
              <svg
                className="animate-spin h-5 w-5 mr-3 inline"
                viewBox="0 0 24 24"
              >
                <circle
                  className="opacity-25"
                  cx="12"
                  cy="12"
                  r="10"
                  stroke="currentColor"
                  strokeWidth="4"
                />
                <path
                  className="opacity-75"
                  fill="currentColor"
                  d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                />
              </svg>
            ) : (
              'Delete Index'
            )}
          </button>
        </div>
      ),
    },
  ]);

  const handleSectionCompletion = (sectionIndex: number) => {
    setExpandedSection(sectionIndex);
  };

  const handleSectionToggle = (sectionIndex: number) => {
    if (expandedSection === sectionIndex) {
      setExpandedSection(0);
    } else {
      setExpandedSection(sectionIndex);
    }
  };

  const handleCreateIndex = async (indexName: string) => {
    const sectionIndex = 0; // Assuming the "Create Index" section is at index 0
    setSections((prevSections) => {
      const updatedSections = [...prevSections];
      updatedSections[sectionIndex].loading = true;
      return updatedSections;
    });

    try {
      const response = await fetch('/api/pineconeindexes', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          name: indexName,
          dimension: 1536,
          spec: {
            serverless: {
              cloud: 'aws',
              region: 'us-west-2',
            },
          },
        }),
      });

      if (response.ok) {
        handleSectionCompletion(1);
      } else {
        console.error('Error creating index:', response.statusText);
      }
    } catch (error) {
      console.error('Error creating index:', error);
    } finally {
      setSections((prevSections) => {
        const updatedSections = [...prevSections];
        updatedSections[sectionIndex].loading = false;
        return updatedSections;
      });
    }
  };

  return (
    <Container className="mx-auto px-4 py-8">
      <h1 className="text-3xl font-bold mb-8 text-white text-center">Vector Database Demo</h1>
      <p className="text-zinc-200 mb-6">
        This interactive demo allows you to create a vector database index, populate it with embeddings, attach metadata
        to your embeddings when upserting them, and then issue queries in order to see what results are retrieved.
      </p>
      <p className="text-zinc-200 mb-6">
        It uses Pinecone under the hood for the vector database provider and is a great introduction to working with
        vector databases.
      </p>
      <div className="bg-gray-800 shadow-md rounded-lg max-w-3xl mx-auto">
        {sections.map((section, index) => (
          <div key={index} className="border-b border-gray-700">
            <div
              className={`flex justify-between items-center p-4 cursor-pointer ${expandedSection === index ? 'bg-gray-700' : ''
                }`}
              onClick={() => handleSectionToggle(index)}
            >
              <h3 className="text-lg font-semibold text-white">{section.title}</h3>
              <svg
                className={`w-6 h-6 transform transition-transform text-white ${expandedSection === index ? 'rotate-180' : ''
                  }`}
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7" />
              </svg>
            </div>
            {expandedSection === index && <div>{section.content(sections, handleCreateIndex)}</div>}
          </div>
        ))}
      </div>
    </Container>
  );
};

export default Demo;
